<?
	include_once("lib/conf.common.php");
	include_once("lib/func.common.php");
	include_once("lib/class.cApplicant.php");
	include_once("lib/class.rFastTemplate.php");

	$no = array();
	$no[] = "2006050070";
	$no[] = "2006050166";
	$no[] = "2006050169";
	$no[] = "2006050219";
	$no[] = "2006050185";
	$no[] = "2006050214";
	$no[] = "2006050222";
	$no[] = "2006050235";
	$no[] = "2006050315";
	$no[] = "2006050331";
	$no[] = "2006060007";
	$no[] = "2006070016";
	$no[] = "2006070017";
	$no[] = "2006070018";
	$no[] = "2006070019";
	$no[] = "2006070020";
	$no[] = "2006070021";
	$no[] = "2006070022";
	$no[] = "2006070023";
	$no[] = "2006070024";
	$no[] = "2006070002";
	$no[] = "2006070003";
	$no[] = "2006070004";
	$no[] = "2006070005";
	$no[] = "2006070006";
	$no[] = "2006070008";
	$no[] = "2006070009";
	$no[] = "2006070010";
	$no[] = "2006070015";
	$no[] = "2006070060";
	$no[] = "2006070065";
	$no[] = "2006070025";
	$no[] = "2006070026";
	$no[] = "2006070027";
	$no[] = "2006070029";
	$no[] = "2006070030";
	$no[] = "2006070031";
	$no[] = "2006070035";
	$no[] = "2006070036";
	$no[] = "2006070037";
	$no[] = "2006070038";
	$no[] = "2006070040";
	$no[] = "2006070045";
	$no[] = "2006070046";
	$no[] = "2006070047";
	$no[] = "2006070048";
	$no[] = "2006070049";
	$no[] = "2006070054";
	$no[] = "2006070055";
	$no[] = "2006070085";
	$no[] = "2006070087";
	$no[] = "2006070088";
	$no[] = "2006070089";
	$no[] = "2006070068";
	$no[] = "2006070071";
	$no[] = "2006070072";
	$no[] = "2006070073";
	$no[] = "2006070074";
	$no[] = "2006070079";
	$no[] = "2006070082";
	$no[] = "2006070110";
	$no[] = "2006070111";
	$no[] = "2006070093";
	$no[] = "2006070095";
	$no[] = "2006070096";
	$no[] = "2006070097";
	$no[] = "2006070098";
	$no[] = "2006070099";
	$no[] = "2006070100";
	$no[] = "2006070102";
	$no[] = "2006070103";
	$no[] = "2006070104";
	$no[] = "2006070105";
	$no[] = "2006070106";
	$no[] = "2006070108";
	$no[] = "2006070109";
	$no[] = "2006070113";
	$no[] = "2006070114";
	$no[] = "2006070115";
	$no[] = "2006070116";
	$no[] = "2006070117";
	$no[] = "2006070123";
	$no[] = "2006070119";
	$no[] = "2006070120";
	$no[] = "2006070122";
	$no[] = "2006070124";
	$no[] = "2006070125";
	$no[] = "2006070126";
	$no[] = "2006070128";
	$no[] = "2006070129";
	$no[] = "2006070130";
	$no[] = "2006070133";
	$no[] = "2006070134";
	$no[] = "2006070135";
	$no[] = "2006070136";
	$no[] = "2006070137";
	$no[] = "2006070138";
	$no[] = "2006070139";
	$no[] = "2006070140";
	$no[] = "2006070141";
	$no[] = "2006070142";
	$no[] = "2006070143";
	$no[] = "2006070144";
	$no[] = "2006070145";
	$no[] = "2006050351";
	$no[] = "2006050339";
	$no[] = "2006050336";
	$no[] = "2006050332";
	$no[] = "2006050329";
	$no[] = "2006050313";
	$no[] = "2006050312";
	$no[] = "2006050303";
	$no[] = "2006050295";
	$no[] = "2006050292";
	$no[] = "2006050281";
	$no[] = "2006050279";
	$no[] = "2006050270";
	$no[] = "2006050262";
	$no[] = "2006050256";
	$no[] = "2006050242";
	$no[] = "2006050233";
	$no[] = "2006050173";
	$no[] = "2006050172";
	$no[] = "2006050167";
	$no[] = "2006050146";
	$no[] = "2006050139";
	$no[] = "2006050137";
	$no[] = "2006050130";
	$no[] = "2006050118";
	$no[] = "2006050112";
	$no[] = "2006050108";
	$no[] = "2006050095";
	$no[] = "2006050084";
	$no[] = "2006050071";
	$no[] = "2006050064";
	$no[] = "2006050061";
	$no[] = "2006050059";
	$no[] = "2006050050";
	$no[] = "2006050048";
	$no[] = "2006050047";
	$no[] = "2006050040";
	$no[] = "2006050031";
	$no[] = "2006050008";
	$no[] = "2006050005";

	$applicant = new cApplicant($mysqlhost, $mysqluser, $mysqlpass, $mysqldb, $applicantTable, $rateTable, $periodTable, $roomTable, $priceTable, $preferenceTable, $paymentTable);
	$applicant->connectDatabase();

	$count = 0;
	for ($i = 0; $i < count($no); $i++) {
		$applicant->getApplicantInfo($no[$i]);
		$from = "reslife@korea.ac.kr";
		$to = $applicant->personEmail;
		//$to = "ksh@intia.co.kr";
		//$to = "heeryun@korea.ac.kr";

		$subject = "ATTN: KU Housing Application-Deposit not received";

		$msg = "Dear <font style=\"text-decoration:underline;\">$applicant->personLastName, $applicant->personFirstName $applicant->personMiddleName</font>,<br>\n";
		$msg .= "Application Number: <font style=\"text-decoration:underline;\">$applicant->applyNumber</font><br><br>\n";
		$msg .= "Thank you for submitting your application for KU International Student Residence Hall.<br>\n";
		$msg .= "The deposit payment of 200,000 KRW has not been received for your application for <font style=\"text-decoration:underline;\">Fall 2006</font> as of July 18, 2006.<br><br>\n";
		$msg .= "1. If you are not <font style=\"text-decoration:underline;\">a current resident</font> who were residing at KU residence international residence hall in the Spring term or the Summer term, you should request the deposit transfer to <font style=\"text-decoration:underline;\">Fall 2006</font> via the residence life website. Please refer to \"Deposit Refund/Transfer\" page.<br><br>\n";
		$msg .= "2. If you already made the payment <font style=\"text-decoration:underline;\">and</font> faxed/mailed the deposit transfer confirmation stub attached by your application to the residence life office, please allow 7-10 days to process the payment confirmation.  It usually takes about a week to complete an international wire transfer.<br><br>\n";
		$msg .= "3. If you already made the payment, you need to submit the deposit transfer confirmation stub attached by your application by fax (82-2-926-3464) by Sunday, July 23. Otherwise, your application without a deposit payment will not be processed further for room assignment.<br><br>\n";
		$msg .= "4. If you haven¡¯t made the payment, then transfer the money to the residence life account and follow the instruction in No. 3.  Also refer to the prospect resident application procedure. Otherwise, your application without a deposit payment will not be processed further for room assignment.<br><br>\n";
		$msg .= "You may want to check your application status via online. You will be required to input your application number and name at the bottom of prospect resident application page.<br>\n";
		$msg .= "Your Application Number is <font style=\"text-decoration:underline;\">$applicant->applyNumber</font>.<br><br>\n";
		$msg .= "Thank you.<br><br>\n";
		$msg .= "Korea University<br>\n";
		$msg .= "Anam Residence Life<br>\n";
		$msg .= "International Residence<br>\n";
		$msg .= "Anam-dong Seongbuk-gu<br>\n";
		$msg .= "Seoul 136 701 Korea<br>\n";
		$msg .= "Email: reslife@korea.ac.kr<br>\n";
		$msg .= "Fax: 82-2-926-3464<br>\n";
		$msg .= "Web: http://reslife.korea.ac.kr";

		$tpl = new rFastTemplate("../tpl/main");
		$tpl->define(array(main => "letter.html"));
		$tpl->assign(array(DOMAIN_URL => $web_http_url,
		                   MESSAGE    => $msg));
		$tpl->parse(FINAL, "main");
		$content = $tpl->GetTemplate(FINAL);
		$headers = "Reply-To: " . $from . "\n";
		$headers .= "From: " . $from . "\n";
		$headers .= "Content-Type: text/html; charset=euc-kr\n";
		$headers .= "Mime-Version: 1.0\n";
		$flag = mail($to, $subject, $content, $headers);
		unset($tpl);

		if ($flag) echo $no[$i] . " : $applicant->personEmail - success<br>";
		else echo $no[$i] . " : $applicant->personEmail - fail<br>";
		$count++;
	}

	echo $count;

	$applicant->closeDatabase();
	unset($applicant);
?>